<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>
    <h1> JS nâng cao </h1>
    <button id="button"> CLick</button>
    <ul id="ul1">
        <li>1</li>
        <li>2</li>
        <li>3</li>
        <li>4</li>
    </ul>

    <ul id="ul2">
        <li>1</li>
        <li>2</li>
        <li>3</li>
        <li>4</li>
    </ul>
</body>

<script>
    // Từ khóa this trả về đối tượng mà đó đang thuộc về 
    console.log(window.location.href);
    console.log(this.location.href);

    // This trong function
    // nếu không bật chế độ strict mode thì this là 1 biến toàn cục, cấp cao nhất là window
    // nếu bật chế độ strict mode thì this trong 1 hàm là 1 biến chưa được định nghĩa, nên giá trị của nó là undefined

    function test1() {
        console.log('this trong hàm không sử dụng strict mode', this);
    }

    function test2() {
        'use strict';
        console.log('this trong hàm có sử dụng strict mode', this);
    }

    test1();
    test2();


    // khi gán hành động cho các sự kiện js, thì this sẽ trả về đối tượng html đang được gán sự kiện đó (this sẽ trỏ về đối tượng trước dấu chấm) 
    var button = document.getElementById('button');
    button.addEventListener('click', function () {
        console.log('this trong hàm click của button', this);
    });

    var listItem = document.querySelectorAll('#ul1 li');
    // [...listItem] chuyển đổi NodeList thành một mảng thực sự vì listItem hiện tại chỉ là NodeList 
    [...listItem].forEach(function (item) {
        item.addEventListener('click', function () {
            console.log('click item', this);
        });
    });

    // This trong object
    let infor = {
        full_name: 'Dương Quỳnh An',
        age: 1,
        sex: 2,
        getFullName: function () {
            console.log(this.full_name);
            console.log(infor.full_name);
        }
    }

    infor.getFullName();

    // This trong arrow function không có đối tượng this
    var listItem = document.querySelectorAll('#ul2 li');
    // [...listItem] chuyển đổi NodeList thành một mảng thực sự vì listItem hiện tại chỉ là NodeList 
    [...listItem].forEach(function (item) {
        item.addEventListener('click',  () => {
            console.log('click item', this);
        });
    });


</script>

</html>